{
	"name": "elasticsearch",
	"description": "",
	"target_cloud": {
		"type": "aws",
		"region": "us-east-1",
		"zone": "us-east-1a"
	},
	"labels": [],
	"services": [{
		"name": "elasticsearch",
		"description": "",
		"resources": {
			"replicas": 1
		},
		"restart": "always",
		"labels": [],
		"ports": [{
			"is_public": false,
			"target_port": "tcp",
			"is_websocket": false,
			"port": 9300
		}],
		"containers": [{
			"name": "es-master",
			"description": "intended for clustering management only, no data, no HTTP API",
			"resources": {
				"vcpu": 2,
				"memory": 4096,
				"io": 100
			},
			"image_url": "docker.elastic.co/elasticsearch/elasticsearch:6.2.3",
			"ports": [{
				"name": "tcp",
				"container_port": 9300
			}],
			"environment": [{
				"name": "CLUSTER_NAME",
				"value": "docker-cluster"
			}, {
				"name": "NODE_MASTER",
				"value": "true"
			}, {
				"name": "NODE_DATA",
				"value": "false"
			}, {
				"name": "BOOTSTRAP_MEMORY_LOCK",
				"value": "true"
			}, {
				"name": "ES_JAVA_OPTS",
				"value": "-Xmx2g -Xms2g"
			}, {
				"name": "HTTP_ENABLE",
				"value": "false"
			}],
			"labels": [],
			"commands": [],
			"volume_mounts": [{
				"mount_path": "/usr/share/elasticsearch/data",
				"name": "es-master"
			}]
		}]
	}, {
		"name": "kibana",
		"description": "",
		"resources": {
			"replicas": 1
		},
		"restart": "always",
		"labels": [],
		"ports": [{
			"is_public": true,
			"target_port": "web",
			"is_websocket": false,
			"port": 5601,
			"kpi_policy": "kibana"
		}],
		"containers": [{
			"name": "kibana",
			"resources": {
				"vcpu": 2,
				"memory": 4096,
				"io": 50
			},
			"image_url": "docker.elastic.co/kibana/kibana:6.2.3",
			"ports": [{
				"name": "web",
				"container_port": 5601
			}],
			"environment": [{
				"name": "ELASTICSEARCH_URL",
				"value": "http://es-client:9200"
			}],
			"labels": [],
			"commands": [],
			"volume_mounts": []
		}]
	}, {
		"name": "logstash",
		"description": "",
		"resources": {
			"replicas": 1
		},
		"restart": "always",
		"labels": [],
		"ports": [{
			"is_public": true,
			"target_port": "http",
			"is_websocket": false,
			"port": 9600
		}],
		"containers": [{
			"name": "logstash",
			"resources": {
				"vcpu": 1,
				"memory": 2048,
				"io": 10
			},
			"image_url": "docker.elastic.co/logstash/logstash:6.2.3",
			"ports": [{
				"name": "http",
				"container_port": 9600
			}],
			"environment": [{
				"name": "TWITTER_CONSUMER_KEY",
				"value": "CONSUMER_KEY_GOES_HERE"
			}, {
				"name": "TWITTER_CONSUMER_SECRET",
				"value": "CONSUMER_SECRET_GOES_HERE"
			}, {
				"name": "TWITTER_OAUTH_TOKEN",
				"value": "ACCESS_TOKEN_GOES_HERE"
			}, {
				"name": "TWITTER_OAUTH_TOKEN_SECRET",
				"value": "ACCESS_TOKEN_SECRET_GOES_HERE"
			}, {
				"name": "TWITTER_KEYWORDS",
				"value": "Seach,keywords,separated,by,commas"
			}],
			"labels": [],
			"commands": ["/bin/bash", "-c", "echo input {twitter {consumer_key =\\> \\\"\\${TWITTER_CONSUMER_KEY}\\\" consumer_secret =\\> \\\"\\${TWITTER_CONSUMER_SECRET}\\\" oauth_token =\\> \\\"\\${TWITTER_OAUTH_TOKEN}\\\" oauth_token_secret =\\> \\\"\\${TWITTER_OAUTH_TOKEN_SECRET}\\\" keywords =\\> [\\\"\\${TWITTER_KEYWORDS}\\\"] full_tweet =\\> true}} output {elasticsearch {hosts =\\> \\\"es-client:9200\\\"}} >  /usr/share/logstash/pipeline/logstash.conf; bin/logstash -f /usr/share/logstash/pipeline/logstash.conf --config.reload.automatic"],
			"volume_mounts": []
		}]
	}, {
		"name": "es-client",
		"description": "",
		"resources": {
			"replicas": 1
		},
		"restart": "always",
		"labels": [],
		"ports": [{
			"is_public": true,
			"target_port": "http",
			"is_websocket": false,
			"port": 9200
		}, {
			"is_public": false,
			"target_port": "tcp",
			"is_websocket": false,
			"port": 9300
		}],
		"containers": [{
			"name": "es-client",
			"description": "intended for client usage, no data, with HTTP API",
			"resources": {
				"vcpu": 2,
				"memory": 4096,
				"io": 100
			},
			"image_url": "docker.elastic.co/elasticsearch/elasticsearch:6.2.3",
			"ports": [{
				"name": "http",
				"container_port": 9200
			}, {
				"name": "tcp",
				"container_port": 9300
			}],
			"environment": [{
				"name": "DISCOVERY_ZEN_PING_UNICAST_HOSTS",
				"value": "elasticsearch"
			}, {
				"name": "NODE_MASTER",
				"value": "false"
			}, {
				"name": "NODE_DATA",
				"value": "false"
			}, {
				"name": "BOOTSTRAP_MEMORY_LOCK",
				"value": "true"
			}, {
				"name": "CLUSTER_NAME",
				"value": "docker-cluster"
			}, {
				"name": "HTTP_ENABLE",
				"value": "true"
			}],
			"labels": [],
			"commands": [],
			"volume_mounts": [{
				"mount_path": "/usr/share/elasticsearch/data",
				"name": "es-client"
			}]
		}]
	}, {
		"name": "es-data",
		"description": "",
		"resources": {
			"replicas": 1
		},
		"restart": "always",
		"labels": [],
		"ports": [{
			"is_public": false,
			"target_port": "transport",
			"is_websocket": false,
			"port": 9300
		}],
		"containers": [{
			"name": "es-data",
			"description": "intended for storing and indexing data, no HTTP API",
			"resources": {
				"vcpu": 2,
				"memory": 4096,
				"io": 100
			},
			"image_url": "docker.elastic.co/elasticsearch/elasticsearch:6.2.3",
			"ports": [{
				"name": "transport",
				"container_port": 9300
			}],
			"environment": [{
				"name": "DISCOVERY_ZEN_PING_UNICAST_HOSTS",
				"value": "elasticsearch"
			}, {
				"name": "NODE_MASTER",
				"value": "false"
			}, {
				"name": "NODE_DATA",
				"value": "true"
			}, {
				"name": "BOOTSTRAP_MEMORY_LOCK",
				"value": "true"
			}, {
				"name": "CLUSTER_NAME",
				"value": "docker-cluster"
			}, {
				"name": "HTTP_ENABLE",
				"value": "false"
			}],
			"labels": [],
			"commands": [],
			"volume_mounts": [{
				"mount_path": "/usr/share/elasticsearch/data",
				"name": "es-data"
			}]
		}]
	}],
	"volumes": [{
		"name": "es-master",
		"access_mode": "ReadWriteOnce",
		"size": 4,
		"persistent": true,
		"labels": []
	}, {
		"name": "es-data",
		"access_mode": "ReadWriteOnce",
		"size": 100,
		"persistent": true,
		"labels": []
	}, {
		"name": "es-client",
		"access_mode": "ReadWriteOnce",
		"size": 4,
		"persistent": true,
		"labels": []
	}],
	"kpi_policies": [{
		"name": "kibana",
		"definition": {
			"max_latency": "400ms"
		}
	}]
}