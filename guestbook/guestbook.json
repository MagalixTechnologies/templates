{
  "name": "my-guestbook-with-policy-0",
  "description": "The application consists of a web front-end, Redis master for storage, and replicated set of Redis slaves",
  "target_cloud": {
    "type": "aws",
    "region": "us-east-1",
    "zone": "us-east-1a"
  },
  "labels": [{
      "label": "environment",
      "value": "dev"
    }
  ],
  "kpi_policies": [{
    "name": "basic-policy",
    "definition": {
      "max_latency": "800ms"
    }
  }],
  "services": [{
      "name": "redis-master",
      "description": "This service hosts the redis master container",
      "labels": [{
          "label": "environment",
          "value": "dev"
        },
        {
          "label": "app",
          "value": "redis"
        },
        {
          "label": "role",
          "value": "master"
        }
      ],
      "ports": [{
        "is_public": false,
        "port": 6379,
        "target_port": "port-master"
      }],
      "replicas": 1,
      "resources": {
        "icu": 1,
        "memory": 0.5,
        "io": 1000
      },
      "containers": [{
        "name": "redis-master",
        "description": "Master container of the redis cache ",
        "image_url": "redis:2.8.23",
        "commands": [],
        "ports": [{
          "name": "port-master",
          "container_port": 6379
        }],
        "labels": [{
            "label": "environment",
            "value": "dev"
          },
          {
            "label": "role",
            "value": "master"
          }
        ]
      }]
    },
    {
      "name": "redis-slave",
      "description": "This service hosts the redis slave containers",
      "labels": [{
          "label": "environment",
          "value": "dev"
        },
        {
          "label": "app",
          "value": "redis"
        },
        {
          "label": "role",
          "value": "slave"
        }
      ],
      "ports": [{
        "is_public": false,
        "port": 6379,
        "target_port": "port-slave"
      }],
      "resources": {
        "icu": 1,
        "memory": 0.5,
        "io": 1000
      },
      "replicas": 2,
      "containers": [{
        "name": "redis-slave",
        "description": "slave container of the redus application ",
        "image_url": "kubernetes/redis-slave:v2",
        "commands": [],
        "ports": [{
          "name": "port-slave",
          "container_port": 6379
        }],
        "labels": [{
            "label": "environment",
            "value": "dev"
          },
          {
            "label": "role",
            "value": "slave"
          }
        ]
      }]
    },
    {
      "name": "guestbook",
      "description": "guestbook application",
      "labels": [{
          "label": "environment",
          "value": "dev"
        },
        {
          "label": "app",
          "value": "guestbook"
        }
      ],
      "ports": [{
        "is_public": true,
        "port": 8001,
        "target_port": "http-server",
        "kpi_policy": "basic-policy"
      }],
      "resources": {
        "icu": 1,
        "memory": 0.5,
        "io": 1000
      },
      "replicas": 3,
      "containers": [{
        "name": "guestbook",
        "description": "guestbook application written in go",
        "labels": [{
            "label": "environment",
            "value": "dev"
          },
          {
            "label": "app",
            "value": "guestbook"
          }
        ],
        "replicas": 1,
        "image_url": "gcr.io/google_containers/guestbook:v3",
        "commands": [],
        "ports": [{
          "name": "http-server",
          "container_port": 3000
        }],
        "resources": {
          "icu": 1,
          "memory": 0.5,
          "io": 1000
        }
      }]
    }
  ]
}
